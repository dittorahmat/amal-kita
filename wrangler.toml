name = "amal-kita"
compatibility_date = "2024-11-07"
compatibility_flags = ["nodejs_compat"]

# Workers Sites
[assets]
binding = "ASSETS"

# R2 Buckets for image storage
[[r2_buckets]]
binding = "CAMPAIGN_IMAGES"
bucket_name = "campaign-images"
preview_bucket_name = "campaign-images-preview"

[[r2_buckets]]
binding = "EVENT_IMAGES"
bucket_name = "event-images"
preview_bucket_name = "event-images-preview"

# Configuration for local development
[dev]
port = 8787

# Configuration for local development with Miniflare
[miniflare]
# Enable R2 emulation for local development
r2_buckets = [
    { binding = "CAMPAIGN_IMAGES", bucket_name = "campaign-images" },
    { binding = "EVENT_IMAGES", bucket_name = "event-images" }
]

# Durable Objects
[[durable_objects.bindings]]
name = "GlobalDurableObject"
class_name = "GlobalDurableObject"

# Migrations
[[migrations]]
tag = "v1"
new_classes = ["GlobalDurableObject"]

[env.development]
name = "amal-kita-dev"

# Define variables for development environment
[env.development.vars]
# Odoo Configuration
ODOO_BASE_URL = "http://localhost:8096"
ODOO_USERNAME = "admin"
ODOO_PASSWORD = "admin"
ODOO_DATABASE = "odoo"

# Cloudinary Configuration
CLOUDINARY_CLOUD_NAME = "dogjcyuxn"
CLOUDINARY_API_KEY = "678593415839236"
CLOUDINARY_API_SECRET = "iBd8KocwZZEgSvPBdOa4iS7ivQg"
CLOUDINARY_UPLOAD_PRESET = "amal_kita_upload"

[env.production]
name = "amal-kita"

# Define variables for production environment
[env.production.vars]
# Odoo Configuration
ODOO_BASE_URL = "http://localhost:8096"
ODOO_USERNAME = "admin"
ODOO_PASSWORD = "admin"
ODOO_DATABASE = "odoo"

# Cloudinary Configuration
CLOUDINARY_CLOUD_NAME = "dogjcyuxn"
CLOUDINARY_API_KEY = "678593415839236"
CLOUDINARY_API_SECRET = "iBd8KocwZZEgSvPBdOa4iS7ivQg"
CLOUDINARY_UPLOAD_PRESET = "amal_kita_upload"

# Define bindings for use in dev, preview, and production
[[env.development.r2_buckets]]
binding = "CAMPAIGN_IMAGES"
bucket_name = "campaign-images-dev"

[[env.development.r2_buckets]]
binding = "EVENT_IMAGES"
bucket_name = "event-images-dev"

[[env.production.r2_buckets]]
binding = "CAMPAIGN_IMAGES"
bucket_name = "campaign-images"

[[env.production.r2_buckets]]
binding = "EVENT_IMAGES"
bucket_name = "event-images"

[[env.development.durable_objects.bindings]]
name = "GlobalDurableObject"
class_name = "GlobalDurableObject"

[[env.production.durable_objects.bindings]]
name = "GlobalDurableObject"
class_name = "GlobalDurableObject"